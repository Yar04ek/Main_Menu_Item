import { jsx as _jsx } from "react/jsx-runtime";
import { useMemo, useContext, cloneElement } from 'react';
import dataTests from '../global/data-tests';
import { CollapseContext } from './collapse-context';
import { COLLAPSE_CONTROL_TEST_ID } from './consts';
/**
 * @name CollapseControl
 */
export const CollapseControl = ({ children, 'data-test': dataTest }) => {
    const { setCollapsed, collapsed, id } = useContext(CollapseContext);
    const child = useMemo(() => {
        if (typeof children === 'function') {
            return children(collapsed);
        }
        return children;
    }, [children, collapsed]);
    return (_jsx("p", { "data-test": dataTests(COLLAPSE_CONTROL_TEST_ID, dataTest), children: cloneElement(child, {
            onClick: setCollapsed,
            'aria-controls': `collapse-content-${id}`,
            'aria-expanded': String(!collapsed),
        }) }));
};
export default CollapseControl;
