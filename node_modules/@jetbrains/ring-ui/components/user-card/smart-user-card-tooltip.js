import { jsx as _jsx } from "react/jsx-runtime";
import { Component } from 'react';
import LoaderInline from '../loader-inline/loader-inline';
import UserCardTooltip from './tooltip';
import styles from './user-card.css';
export default class SmartUserCardTooltip extends Component {
    state = {
        user: null,
        loading: false,
    };
    loadUser = async () => {
        if (this.state.user) {
            return;
        }
        try {
            this.setState({ loading: true });
            const user = await this.props.userDataSource();
            this.setState({ user });
        }
        catch (e) {
            // Skip it
        }
        finally {
            this.setState({ loading: false });
        }
    };
    renderNoUser = () => this.state.loading ? (_jsx("div", { className: styles.userCardSpaced, children: _jsx(LoaderInline, {}) })) : ('');
    render() {
        const { user } = this.state;
        const { children, userDataSource, ...restProps } = this.props;
        const dropdownProps = {
            onMouseEnter: this.loadUser,
            ...UserCardTooltip.defaultProps.dropdownProps,
        };
        return (_jsx(UserCardTooltip, { user: user, renderNoUser: this.renderNoUser, dropdownProps: dropdownProps, ...restProps, children: children }));
    }
}
